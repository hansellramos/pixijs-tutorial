<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Hello World</title>
    <style>
        body { margin: 0; box-sizing: border-box; }
    </style>
</head>
<script src="node_modules/pixi.js/dist/pixi.js"></script>
<body>
<script type="text/javascript">
    //Aliases
    var Container = PIXI.Container,
        autoDetectRenderer = PIXI.autoDetectRenderer,
        loader = PIXI.loader,
        resources = PIXI.loader.resources,
        Sprite = PIXI.Sprite;

    //Create a Pixi stage and renderer and add the
    //renderer.view to the DOM
    var stage = new Container(),
        renderer = autoDetectRenderer(512, 512);

    renderer.backgroundColor = "0xffeeff";
    document.body.appendChild(renderer.view);

    var rocket, sky;
    var skyTexture;

    //load an image and run the `setup` function when it's done
    loader
        .add([
            "images/09.png",
            "images/mario_sky.PNG",
            "sky.json"
        ])
        .load(setup);

    function setup() {

        var texture = PIXI.utils.TextureCache["images/09.png"];
        var skyTexture = PIXI.utils.TextureCache["images/mario_sky.PNG"];
        var skyRectangle = new PIXI.Rectangle(2, 726, 512, 174);

        var rectangle = new PIXI.Rectangle(96, 64, 32, 32);

        texture.frame = rectangle;
        skyTexture.frame = skyRectangle;

        var frames = [];
        for (var i = 0; i <= 5; i++) {

            frames.push(PIXI.Texture.fromFrame('sky_sequence_0' + i + '.png'));
        }
        var anim = new PIXI.extras.AnimatedSprite(frames);
        anim.animationSpeed = 0.1;
        anim.play();
        stage.addChild(anim);

        rocket = new Sprite(texture);
        sky = new Sprite(skyTexture);

        rocket.x = 32;
        rocket.y = 32;

        sky.y = 200;
        sky.height = 178;

        stage.addChild(sky);
        stage.addChild(rocket);

        gameLoop();
        //Render the stage

    }

    function gameLoop(){

        //Loop this function 60 times per second
        requestAnimationFrame(gameLoop);

        //Move the cat 1 pixel per frame
        rocket.x += 1;

        if (rocket.x > renderer.width){
            rocket.x = -31;
        }

        //Render the stage
        renderer.render(stage);
    }

</script>
</body>
</html>